extends ../../layouts/default.pug
include ../../mixins/box-head.pug
include ../../mixins/product-layout.pug
include ../../mixins/alert.pug

block main
    +alert-success(5000)
    +alert-error(5000)
    
    .container
        .hero-section
            h1 Chào mừng đến với Lam Mobiles
            p Khám phá những sản phẩm mới nhất và nổi bật ngay tại cửa hàng của chúng tôi!
            button(onclick="window.location.href='http://localhost:3000/products'") Shop Now

    .section-slider.my-5
        .container
            .row
                .col-12
                    +box-head("Hình ảnh sản phẩm")

            .swiper-container.home-image-description
                .swiper-wrapper
                    each image in images
                        .swiper-slide
                            img(src=image, alt="Product Image")

                // Đặt các nút điều hướng bên trong .swiper-container
                .swiper-button-next
                .swiper-button-prev
                .swiper-pagination
                
    .section-products-featured.my-5
        .container
            .row 
                .col-12
                    +box-head("Sản phẩm nổi bật")

            +product-grid(productsFeatured)

    .section-products-new.my-5
        .container
            .row 
                .col-12
                    +box-head("Sản phẩm mới")

            +product-grid(productsNew)

    // Thêm các liên kết CSS và JS của Swiper
    link(rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css")
    script(src="https://unpkg.com/swiper/swiper-bundle.min.js")

    // CSS tùy chỉnh cho swiper
    style.
        .home-image-description {
            max-width: 100%;
            margin: 0 auto;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .home-image-description .swiper-slide {
            display: flex;
            justify-content: center;
            align-items: center;
            background: #f8f9fa;
            height: 500px;
            overflow: hidden;
            position: relative;
        }
        
        .home-image-description .swiper-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            border-radius: 10px;
            transition: transform 0.3s ease;
            display: block;
        }
        
        .home-image-description .swiper-slide img:hover {
            transform: scale(1.02);
        }
        
        .home-image-description .swiper-button-next,
        .home-image-description .swiper-button-prev {
            color: #DB0E0E;
            background: rgba(255,255,255,0.9);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            margin-top: -25px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            z-index: 10;
        }
        
        .home-image-description .swiper-button-next:hover,
        .home-image-description .swiper-button-prev:hover {
            background: rgba(255,255,255,1);
            transform: scale(1.1);
        }
        
        .home-image-description .swiper-button-next::after,
        .home-image-description .swiper-button-prev::after {
            font-size: 18px;
            font-weight: bold;
        }
        
        .home-image-description .swiper-pagination {
            bottom: 20px;
        }
        
        .home-image-description .swiper-pagination-bullet {
            background: #DB0E0E;
            opacity: 0.5;
            width: 12px;
            height: 12px;
            margin: 0 5px;
        }
        
        .home-image-description .swiper-pagination-bullet-active {
            opacity: 1;
            transform: scale(1.3);
            
            box-shadow: 0 0 0 2px #DB0E0E;
        }
        
        @media (max-width: 768px) {
            .home-image-description .swiper-slide {
                height: 300px;
            }
            
            .home-image-description .swiper-button-next,
            .home-image-description .swiper-button-prev {
                width: 40px;
                height: 40px;
                margin-top: -20px;
            }
            
            .home-image-description .swiper-button-next::after,
            .home-image-description .swiper-button-prev::after {
                font-size: 14px;
            }
            
            .home-image-description .swiper-pagination {
                bottom: 15px;
            }
        }
        
        @media (max-width: 576px) {
            .home-image-description .swiper-slide {
                height: 250px;
            }
        }

    script.
      document.addEventListener('DOMContentLoaded', () => {
        const swiper = new Swiper('.swiper-container', {
          navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
          },
          pagination: {
            el: '.swiper-pagination',
            clickable: true,
            dynamicBullets: true,
          },
          loop: true,
          autoplay: {
            delay: 4000,
            disableOnInteraction: false,
          },
          effect: 'fade',
          fadeEffect: {
            crossFade: true
          },
          speed: 800,
        });
      });